/* &copy; 2015 Lindsay Roberts http://www.designbyfish.com/ */
!function(a){function b(b,c){var d=a("#billing-form");if(c.error)a(".validation .error-message").html(c.error.message),a(".validation").slideToggle(),console.log("Stripe payment was an error!"),"invalid_cvc"==c.error.code&&a("#cvc").addClass("error"),"incorrect_number"==c.error.code&&a("#number").addClass("error"),"invalid_expiry_year"==c.error.code&&a("#exp-date").addClass("error");else{var e=c.id;d.append(a('<input type="hidden" name="stripeToken" />').val(e)),d.attr("action","/billing"),d.get(0).submit()}}function c(a){for(var b,c=a.split("/"),d=[],e=0,f=c.length;f>e;++e){for(b="";"\\"==c[e].slice(-1);)b+=c[e++].slice(0,-1)+"/";d.push(b+c[e])}return d}function d(a,b){return a+"_"+b}Stripe.setPublishableKey("pk_test_hh5vsZ7wNnMi80XJgzHVanEm"),a(document).ready(function(){a('button[type="submit"]').click(function(e){e.preventDefault();var f=a("#exp-date").val(),f=c(f);console.log(f),a("#exp-month").val(f[0]),a("#exp-year").val(f[1]);var g=a("#name").val();Stripe.card.createToken({name:g,number:a("#number").val(),cvc:a("#cvc").val(),exp_month:a("#exp-month").val(),exp_year:a("#exp-year").val(),plan:d(a("#selected_plan").val(),a("#subscription_checkbox").val())},b)})})}(jQuery);