/* &copy; 2015 Lindsay Roberts http://www.designbyfish.com/ */
!function(a){function b(a){for(;/(\d+)(\d{3})/.test(a.toString());)a=a.toString().replace(/(\d+)(\d{3})/,"$1,$2");var b="$"+a+" USD";return b}function c(b){return a.getJSON(b)}var d=[],e=["../api/pro/annually/2014.json","../api/premium/annually/2014.json","../api/platinum/annually/2014.json"];a(document).ready(function(){a.each(e,function(a,b){d.push(c(b))}),a.when.apply(a,d).done(function(){function c(){var a=new Date(f[0]),b=new Date(f[f.length-1]);r.zoomToDates(a,b)}for(var d=[],e=[],f=[],g=[],h=[],i=[],j=[],k={},l={},m={},n=0,o=arguments.length;o>n;n++)d.push(arguments[n][0]);a.each(d,function(a,b){e.push(b.statistics.total_return)});var p=Array.min(e),q=Array.max(e);a.each(d,function(a,b){b.statistics.total_return==q?m=b:b.statistics.total_return==p?k=b:l=b}),a.each(k.logs,function(a,b){var c=b.date.year+"-"+(Number(b.date.month)<10?"0"+Number(b.date.month):Number(b.date.month))+"-"+(Number(b.date.day)<10?"0"+Number(b.date.day):Number(b.date.day));f.push(c),g.push(Number(b.balance))}),a.each(l.logs,function(a,b){h.push(Number(b.balance))}),a.each(m.logs,function(a,b){i.push(Number(b.balance))});for(var n=0;n<f.length;n++)j.push({date:f[n],pro:g[n],premium:h[n],platinum:i[n],pro_balloon:b(g[n]),premium_balloon:b(h[n]),platinum_balloon:b(i[n])});var r=AmCharts.makeChart("log-scale",{type:"serial",theme:"light",marginRight:30,marginTop:17,autoMarginOffset:20,pathToImages:"http://www.amcharts.com/lib/3/images/",dataProvider:j,valueAxes:[{logarithmic:!0,dashLength:1,guides:[{dashLength:6,inside:!0,label:"average",lineAlpha:1,value:90.4}],position:"left"}],graphs:[{bullet:"none",id:"g1",bulletBorderAlpha:1,lineColor:"#D3D3D3",bulletColor:"#FFFFFF",bulletSize:0,lineThickness:1,title:"Pro Formula",useLineColorForBulletBorder:!0,valueField:"pro",balloonText:"<b>Pro Formula</b> <br />[[pro_balloon]]"},{bullet:"none",id:"g2",bulletBorderAlpha:1,lineColor:"#49494A",bulletColor:"#FFFFFF",bulletSize:0,lineThickness:1,title:"Premium Formula",useLineColorForBulletBorder:!0,valueField:"premium",balloonText:"<b>Premium Formula</b> <br />[[premium_balloon]]"},{bullet:"none",id:"g3",bulletBorderAlpha:1,lineColor:"#18AED5",bulletColor:"#FFFFFF",bulletSize:0,lineThickness:1,title:"Platinum Formula",useLineColorForBulletBorder:!0,valueField:"platinum",balloonText:"<b>Platinum Formula</b> <br />[[platinum_balloon]]"}],chartScrollbar:{enabled:!0,scrollbarHeight:10,dragIconWidth:20},chartCursor:{valueLineEnabled:!0,valueLineBalloonEnabled:!0,valueLineAlpha:.5,fullWidth:!0,cursorAlpha:.05},dataDateFormat:"YYYY-MM-DD",categoryField:"date",categoryAxis:{parseDates:!0},"export":{enabled:!1}});r.addListener("dataUpdated",c)})}),Array.min=function(a){return Math.min.apply(Math,a)},Array.max=function(a){return Math.max.apply(Math,a)}}(jQuery);